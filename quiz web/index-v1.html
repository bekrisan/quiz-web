<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="utf-8" />
  <title>Эхлэх - Тоолох (1→3)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{--bg:#f5f7fb;--accent:#2b7cff}
    body{margin:0;height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bg);font-family:Inter,Arial,sans-serif}
    .container{width:100%;max-width:900px;padding:20px}
    .start-screen, .quiz-screen{background:#fff;padding:30px;border-radius:12px;box-shadow:0 8px 30px rgba(20,30,80,.08);text-align:center}
    h1{margin:0 0 16px;font-size:22px}
    .btn{display:inline-block;padding:12px 20px;background:var(--accent);color:#fff;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .countdown{font-size:96px;font-weight:800;color:var(--accent);margin:24px 0;height:120px;display:flex;align-items:center;justify-content:center}
    .small{color:#666}
    .hidden{display:none}
    /* simple fade animation */
    .fade-in { animation: fade .35s ease both }
    @keyframes fade { from { opacity:0; transform: scale(.9) } to { opacity:1; transform: scale(1) } }
  </style>
</head>
<body>
  <div class="container">
    <!-- Start screen -->
    <div id="startScreen" class="start-screen">
      <h1>Сайн байна уу! Бид эхлэхэд бэлэн үү?</h1>
      <div class="small">Товч дарангуут 1 → 2 → 3 тоолно. Тоолол дуусмагц тоглоом эхэлнэ.</div>

      <div id="countdown" class="countdown"> </div>

      <div style="margin-top:18px">
        <button id="startBtn" class="btn">Эхлэе</button>
        <button id="skipBtn" class="btn" style="background:#6c757d;margin-left:8px">Skip</button>
      </div>
    </div>

    <!-- Quiz screen (анхны жишээ, эндээс тоглоомоо эхлүүлнэ) -->
    <div id="quizScreen" class="quiz-screen hidden">
      <h1>Quiz эхэллээ</h1>
      <p class="small">Энд таны quiz UI эсвэл эхлэх логик байрлана.</p>
      <div style="margin-top:12px">
        <button id="backBtn" class="btn" style="background:#555">Буцах</button>
      </div>
    </div>
  </div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const skipBtn = document.getElementById('skipBtn');
    const countdownEl = document.getElementById('countdown');
    const startScreen = document.getElementById('startScreen');
    const quizScreen = document.getElementById('quizScreen');
    const backBtn = document.getElementById('backBtn');

    let countdownTimer = null;

    // Тоолох дараалал: 1 -> 2 -> 3
    const sequence = [1,2,3];

    startBtn.addEventListener('click', () => {
      startBtn.disabled = true;
      skipBtn.disabled = true;
      runCountSequence(sequence, 800).then(() => {
        // Тоолол дууссан үед энэ функц дуудагдана
        startQuiz(); // таны quiz эхлүүлэх функц
      }).catch((e)=>{
        console.log('Count cancelled or error', e);
      }).finally(()=>{
        startBtn.disabled = false;
        skipBtn.disabled = false;
      });
    });

    // Skip товч нь шууд эхлүүлэх
    skipBtn.addEventListener('click', () => {
      startQuiz();
    });

    // Эргэж буцах товч (жишээ)
    backBtn.addEventListener('click', () => {
      quizScreen.classList.add('hidden');
      startScreen.classList.remove('hidden');
    });

    // sequence массив дээрээс нэг нэгээр үзүүлнэ. delayMillis - нэг бүрийн хоорондох хугацаа (ms)
    function runCountSequence(arr, delayMillis=700){
      return new Promise((resolve, reject) => {
        let i = 0;
        countdownEl.textContent = ''; // эхлэхэд хоосон
        // show first immediately
        showNumber(arr[i]);
        i++;
        countdownTimer = setInterval(() => {
          if(i >= arr.length){
            clearInterval(countdownTimer);
            // show "Go!" briefly then resolve
            showText('GO!');
            setTimeout(() => {
              countdownEl.textContent = '';
              resolve();
            }, 500);
            return;
          }
          showNumber(arr[i]);
          i++;
        }, delayMillis);
      });
    }

    function showNumber(n){
      countdownEl.classList.remove('fade-in');
      void countdownEl.offsetWidth; // reflow to restart animation
      countdownEl.textContent = n;
      countdownEl.classList.add('fade-in');
    }
    function showText(t){
      countdownEl.classList.remove('fade-in');
      void countdownEl.offsetWidth;
      countdownEl.textContent = t;
      countdownEl.classList.add('fade-in');
    }

    // Функц: тоглоом эхлүүлэх. Эндээс quiz-ээ унтрааж, UI-г солих юм.
    function startQuiz(){
      // Start screen-ийг нууж quiz screen-ийг харуулна
      startScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');

      // TODO: эндээс таны quiz-ийг эхлүүлэх initialization дуудагна (асуултуудыг үүсгэх, таймер эхлүүлэх...)
      console.log('Quiz should start now. Place your init logic here.');
      // Жишээ: initQuiz();
    }

    // Хэрэв та тоолохыг цуцалмаар байвал энэ функцыг дуудаад interval-г цэвэрлэнэ
    function cancelCountdown(){
      if(countdownTimer) clearInterval(countdownTimer);
      countdownEl.textContent = '';
    }
  </script>
</body>
</html>
